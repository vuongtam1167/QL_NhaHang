create database QL_NHAHANG
go
use QL_NHAHANG
go
create table TAIKHOAN
(
MANV NVARCHAR(7),
TENDANGNHAP VARCHAR(50),
MATKHAU VARCHAR(50),
LOAITK NVARCHAR(15),
TRANGTHAI INT
CONSTRAINT PK_TAIKHOAN
PRIMARY KEY(TENDANGNHAP)
)
CREATE TABLE NHANVIEN
(
MANV NVARCHAR(7),
HOTEN NVARCHAR(50),
EMAIL VARCHAR(70),
CCCD VARCHAR(12),
SDT VARCHAR(10),
HINHANH NVARCHAR(MAX),
CHUCVU NVARCHAR(20),
THANHTICH INT,
TONGTHOIGIANLAM INT,
TRANGTHAI INT

CONSTRAINT PK_NHANVIEN
PRIMARY KEY(MANV)
)
CREATE TABLE HOADON (
  MADATBAN INT,
  MAHD INT IDENTITY(1,1),
  MANV NVARCHAR(7),
  MAKH NVARCHAR(5),
  NGAYLAP DATETIME,
  TONGTIEN decimal,
  VAT decimal

CONSTRAINT PK_HOADON
PRIMARY KEY(MAHD)
)
CREATE TABLE KHACHHANG
(
MAKH NVARCHAR(5),
HOTEN NVARCHAR(30),
CCCD VARCHAR(12),
SDT VARCHAR(10)

CONSTRAINT PK_KHACHHANG
PRIMARY KEY(MAKH)
)
CREATE TABLE CT_HOADON
(
MAHD int,
MAMON INT,
GIA decimal,
SOLUONG int

CONSTRAINT PK_CT_HOADON
PRIMARY KEY(MAMON,MAHD)
)
CREATE TABLE MON
(
MAMON INT,
TENMON NVARCHAR(50),
GIA decimal,
MALOAI INT,
HINHANH NVARCHAR(MAX),
MOTA NVARCHAR(200),
TRANGTHAI INT

CONSTRAINT PK_MON
PRIMARY KEY(MAMON)
)
CREATE TABLE LOAIMON
(
MALOAI INT,
TENLOAI NVARCHAR(50)
CONSTRAINT PK_LOAIMON
PRIMARY KEY(MALOAI)
)
CREATE TABLE CT_MON
(
MAMON INT,
MANGUYENLIEU INT,
SOLUONG INT
CONSTRAINT PK_CHITIETMON
PRIMARY KEY(MAMON,MANGUYENLIEU)
)
CREATE TABLE PHANCONG
(
MANV NVARCHAR(7),
MACONGVIEC NVARCHAR(5),
THOIGIAN INT,
GHICHU NVARCHAR(200)

CONSTRAINT PK_PHANCONG
PRIMARY KEY(MANV,MACONGVIEC)
)
CREATE TABLE CONGVIEC
(
MACONGVIEC NVARCHAR(5),
TENCONGVIEC NVARCHAR(50)

CONSTRAINT PK_CONGVIEC
PRIMARY KEY(MACONGVIEC)
)
CREATE TABLE NGUYENLIEU
(
MANGUYENLIEU INT,
TENNGUYENLIEU NVARCHAR(50),
SOLUONGCON INT,
LOAINGUYENLIEU INT,
MANHACUNGCAP INT,
GIATIEN dec,
MOTA NVARCHAR(200),
TRANGTHAI INT

CONSTRAINT PK_NGUYENLIEU
PRIMARY KEY(MANGUYENLIEU)
)
CREATE TABLE LOAINGUYENLIEU
(
MALOAINL INT,
TENLOAINGUYENLIEU NVARCHAR(50),

CONSTRAINT PK_LOAINGUYENLIEU
PRIMARY KEY(MALOAINL)
)
CREATE TABLE NHACUNGCAP
(
MANHACUNGCAP INT,
TENNHACUNGCAP NVARCHAR(50),
DIACHI NVARCHAR(50),
GHICHU NVARCHAR(200),
TRANGTHAI INT

CONSTRAINT PK_NHACUNGCAP
PRIMARY KEY(MANHACUNGCAP)
)
CREATE TABLE DATBAN
(
MADATBAN INT,
SOBAN INT,
MANV NVARCHAR(7),
MAKH NVARCHAR(5),
THOIGIANDAT NVARCHAR(7),
NGAYDAT Datetime,
GHICHU NVARCHAR(200)

CONSTRAINT PK_DATBAN
PRIMARY KEY(MADATBAN)
)
ALTER TABLE DATBAN
ADD CONSTRAINT FK_DATBAN_NHANVIEN
FOREIGN KEY(MANV)
REFERENCES NHANVIEN(MANV)

ALTER TABLE DATBAN
ADD CONSTRAINT FK_DATBAN_KHACHHANG
FOREIGN KEY(MAKH)
REFERENCES KHACHHANG(MAKH)

ALTER TABLE TAIKHOAN
ADD CONSTRAINT FK_TAIKHOAN_NHANVIEN
FOREIGN KEY(MANV)
REFERENCES NHANVIEN(MANV)

ALTER TABLE PHANCONG
ADD CONSTRAINT FK_PHANCONG_NHANVIEN
FOREIGN KEY(MANV)
REFERENCES NHANVIEN(MANV)

ALTER TABLE PHANCONG
ADD CONSTRAINT FK_PHANCONG_CONGVIEC
FOREIGN KEY(MACONGVIEC)
REFERENCES CONGVIEC(MACONGVIEC)

ALTER TABLE HOADON
ADD CONSTRAINT FK_HOADON_NHANVIEN
FOREIGN KEY(MANV)
REFERENCES NHANVIEN(MANV)

ALTER TABLE HOADON
ADD CONSTRAINT FK_HOADON_KHACHHANG
FOREIGN KEY(MAKH)
REFERENCES KHACHHANG(MAKH)

ALTER TABLE HOADON
ADD CONSTRAINT FK_HOADON_DATBAN
FOREIGN KEY(MADATBAN)
REFERENCES DATBAN(MADATBAN)

ALTER TABLE CT_HOADON
ADD CONSTRAINT FK_CT_HOADON_HOADON
FOREIGN KEY(MAHD)
REFERENCES HOADON(MAHD)

ALTER TABLE CT_HOADON
ADD CONSTRAINT FK_CT_HOADON_MON
FOREIGN KEY(MAMON)
REFERENCES MON(MAMON)

ALTER TABLE MON
ADD CONSTRAINT FK_MON_LOAIMON
FOREIGN KEY(MALOAI)
REFERENCES LOAIMON(MALOAI)

ALTER TABLE CT_MON
ADD CONSTRAINT FK_CT_MON_MON
FOREIGN KEY(MAMON)
REFERENCES MON(MAMON)

ALTER TABLE CT_MON
ADD CONSTRAINT FK_CT_MON_NGUYENLIEU
FOREIGN KEY(MANGUYENLIEU)
REFERENCES NGUYENLIEU(MANGUYENLIEU)

ALTER TABLE NGUYENLIEU
ADD CONSTRAINT FK_NGUYENLIEU_LOAINGUYENLIEU
FOREIGN KEY(LOAINGUYENLIEU)
REFERENCES LOAINGUYENLIEU(MALOAINL)

ALTER TABLE NGUYENLIEU
ADD CONSTRAINT FK_NGUYENLIEU_NHACUNGCAP
FOREIGN KEY(MANHACUNGCAP)
REFERENCES NHACUNGCAP(MANHACUNGCAP)

INSERT INTO NHANVIEN(MANV,HOTEN,EMAIL,CCCD,SDT,HINHANH,CHUCVU,TRANGTHAI,TONGTHOIGIANLAM,THANHTICH)
VALUES ('NV00001',N'Vương Tâm','vt@gmail.com','111122223333','0908123456','Dulieu/NhanVien/NV00001.jpg',N'Quản lý','1',175,225),
	('NV00002',N'Lương Ngọc Tài','lnt@gmail.com','222233334444','0908123457','Dulieu/NhanVien/NV00002.jpg',N'Nhân viên','1',175,175),
	('NV00003',N'Nguyễn Văn Huy','nvh@gmail.com','111155554444','0908123458','Dulieu/NhanVien/NV00003.jpg',N'Nhân viên','1',125,125),
	('NV00004',N'Trần Quốc Bảo','tqb@gmail.com','888866662544','0908123459','Dulieu/NhanVien/NV00004.jpg',N'Nhân viên','1',125,125)

INSERT into TAIKHOAN(MANV,TENDANGNHAP,MATKHAU,LOAITK,TRANGTHAI)
VALUES ('NV00001','vuongtm','e10adc3949ba59abbe56e057f20f883e','QL',1),
	('NV00002','ngocti','e10adc3949ba59abbe56e057f20f883e','NV',1),
	('NV00003','vanhy','e10adc3949ba59abbe56e057f20f883e','NV',1),
	('NV00004','quocbo','e10adc3949ba59abbe56e057f20f883e','NV',1)

INSERT into CONGVIEC(MACONGVIEC,TENCONGVIEC)
values ('CV010',N'Phục vụ'),
	('CV011',N'Lễ tân'),
	('CV012',N'Thu ngân'),
	('CV001',N'Quản lý')

INSERT into PHANCONG(MANV,MACONGVIEC,THOIGIAN,GHICHU)
values ('NV00001','CV010',50,''),
	('NV00001','CV011',25,''),
	('NV00001','CV012',50,''),
	('NV00001','CV001',50,''),
	('NV00002','CV010',100,''),
	('NV00002','CV011',75,''),
	('NV00003','CV010',75,''),
	('NV00003','CV012',50,''),
	('NV00004','CV011',75,''),
	('NV00004','CV012',50,'')

insert into KHACHHANG(MAKH,HOTEN,CCCD,SDT)
values ('KH001',N'Nguyễn Văn A','012345678912','0901234567'),
	('KH002',N'Nguyễn Văn B','012345678913','0901234568'),
	('KH003',N'Trần Quốc C','012345678914','0901234569'),
	('KH004',N'Lê Ngọc D','012345678915','0901234561')

insert into NHACUNGCAP(MANHACUNGCAP,TENNHACUNGCAP,DIACHI,GHICHU,TRANGTHAI)
values (1,N'Trần Lê F',N'Q.Bình Thạnh,TP HCM','',1),
	(2,N'Lê Thị Q',N'Q.6 ,TP HCM','',1),
	(3,N'Nguyễn Ngọc X',N'Q.7 ,TP HCM','',1),
	(4,N'Trần Văn H',N'Tp Biên Hòa,Tỉnh Đồng Nai','',1)

insert into LOAINGUYENLIEU(MALOAINL,TENLOAINGUYENLIEU)
values (1,N'Rau củ'),
	(2,N'Trái cây'),
	(3,N'Thịt'),
	(4,N'Hải Sản'),
	(5,N'Nấm'),
	(6,N'Khác')

insert into NGUYENLIEU(MANGUYENLIEU,TENNGUYENLIEU,SOLUONGCON,LOAINGUYENLIEU,MANHACUNGCAP,GIATIEN,MOTA,TRANGTHAI)
values (1,N'Thịt bò',50,3,1,250000,'',1),
	(2,N'Thịt cừu',50,3,1,220000,'',1),
	(3,N'Mực',30,4,2,280000,'',1),
	(4,N'Tôm hùm',20,4,2,1200000,'',1),
	(5,N'Xà lách',200,1,3,45000,'',1),
	(6,N'Củ cải tím',100,1,3,55000,'',1),
	(7,N'Cam',100,2,3,55000,'',1),
	(8,N'Táo',100,2,3,80000,'',1),
	(9,N'Nấm kim châm',50,5,3,90000,'',1),
	(10,N'Trứng gà',200,6,4,2400,'',1),
	(11,N'Dứa',200,2,3,15000,'',1),
	(12,N'Rau thơm',100,1,3,15000,'',1)


insert into LOAIMON(MALOAI,TENLOAI)
values (1,N'Món khai vị'),
	(2,N'Món chính'),
	(3,N'Món phụ'),
	(4,N'Món tráng miệng')

insert into MON(MAMON,TENMON,GIA,MALOAI,HINHANH,MOTA,TRANGTHAI)
values (1,N'Gỏi bò bóp',150000,1,'Dulieu/Mon/1.png','',1),
	(2,N'Thịt nướng',189000,2,'Dulieu/Mon/2.png','',1),
	(3,N'Lẩu thái',189000,2,'Dulieu/Mon/3.png','',1),
	(4,N'Xà lách trộn',50000,3,'Dulieu/Mon/4.png','',1),
	(5,N'Trái cây',40000,4,'Dulieu/Mon/5.png','',1)

insert into CT_MON(MAMON,MANGUYENLIEU,SOLUONG)
values (1,1,1),
	(1,5,1),
	(1,6,1),
	(1,11,1),
	(2,1,1),
	(2,2,1),
	(2,9,1),
	(2,12,1),
	(3,1,1),
	(3,3,1),
	(3,4,1),
	(3,9,1),
	(3,10,1),
	(3,12,1),
	(4,5,1),
	(4,6,1),
	(4,10,1),
	(4,12,1),
	(5,7,1),
	(5,8,1),
	(5,11,1)

